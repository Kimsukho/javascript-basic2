<!DOCTYPE html>
<html>
<head>
  <title>Document</title>
</head>
<body>
  <script>

    // 함수
    // 함수지향

    // 유효범위
    // : 변수의 수명을 의미함

    // 전역변수
    // : 함수 밖에서 변수를 선언, 애플리케이션 전역에서 접근이 가능한 변수로
    // 어떤 함수 안에서도 그 변수에 접근이 가능함.
    
    var vscope = 'global';    // 전역변수
    function fscope(){
        var vscope = 'local'; // 지역변수
        console.log('함수안 '+ vscope); // 함수안 local
    }
    fscope();
    console.log('함수밖 '+vscope);      // 함수밖 global

    /*
    var vscope = 'global';
    function fscope(){
        vscope = 'local';
        // 위에 var를 사용하지 않은 vscope var를 선언하지 않아
        // 전역변수가 됨. 변수를 선언할 때는 꼭 var을 붙이는 것을 습관화하는 것이 좋다.
        console.log('함수안2 '+vscope);
    }
    fscope();
    console.log('함수밖2 '+vscope);

    
    var vscope = 'global';
    function fscope(){
        var vscope = 'local';
        vscopr = 'local';
        // 원래 var를 쓰지 않으면 전역변수가 선언된 예제를 위에서 보았는데
        // 지역변수가 출력된 이유는 지역변수가 바로 위에 선언이 되어있기 때문에
        // 전역보다 지역을 먼저 참고하게 되는 것이다.
        console.log('함수안3 '+vscope);
    }
    fscope();
    console.log('함수밖3 '+vscope);
    */

    // 유효범위의 효용
    // 지역변수의 사용
    function a (){
        var i = 0;
    }
    for(var i = 0; i < 5; i++){
        a();
        document.write(i);  // 01234
    }

    // 전역변수의 사용
    // function a (){
    //      i = 0;
    // }
    // for(i = 0; i < 5; i++){
    //     a();
    //     document.write(i);
    // }

    var MYAPP = {}    // 전역변수, 변수의 값=객체
                      // 객체안에 들어 있는 변수를 속성이라고 함.
    MYAPP.calculator = {  // 객체에다 calculator 속성을 넣는다
        'left' : null,    // calculator의 값은 객체가 옴
        'right' : null    // 그 객체의 키 값은 left(null), right(null) 
    }                     // null : 현재 값을 아직 정의하지 않았다고 프로그래머가 명시적으로 지정하는 것
    MYAPP.coordinate = {
        'left' : null,
        'right' : null
    }
    
    MYAPP.calculator.left = 10;
    MYAPP.calculator.right = 20;
    
    function sum(){
        return MYAPP.calculator.left + MYAPP.calculator.right;
    }
    document.write(sum());

    // 전역변수를 사용하고 싶지 않다면 아래와 같이 익명함수를 호출함으로서 이러한 목적을 달성가능
    // 익명함수
    (function(){
        var MYAPP = {}      // MYAPP: 함수 안에서 선언된 함수의 지역변수가 된 것
        MYAPP.calculator = {
            'left' : null,
            'right' : null
        }
        MYAPP.coordinate = {
            'left' : null,
            'right' : null
        }
        MYAPP.calculator.left = 10;
        MYAPP.calculator.right = 20;
        function sum(){
            return MYAPP.calculator.left + MYAPP.calculator.right;
        }
        document.write(sum());
    }())


    // 유효범위의 대상 (함수)
    // 자바스크립트의 지역변수는 함수에서만 유효함
    for(var i = 0; i < 1; i++){
        var name = 'coding everybody';
    }
    alert(name);

    // 정적 유효범위
    // 자바스크립트는 함수가 선언된 시점에서의 유효범위를 갖는다. 
    // 유효범위의 방식을 정적 유효범위(static scoping), 혹은 렉시컬(lexical scoping)이라고 한
    var i = 5;      // 전역변수
 
    function a(){
        var i = 10; // a()는 지역변수 i를 선언
        b();
    }
      
    function b(){
        document.write(i);  // b가 내부적으로 가지고 있는 지역변수를 찾게 됨
                            // 하지만 b는 지역변수를 존재하지 않아 전역변수를 찾게 된다.
    }
      
    a();
    
  </script>
</body>
</html>